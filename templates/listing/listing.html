{% extends 'base.html' %}

{% load static %}

{% load humanize %}

{% block link %}
    <link rel="stylesheet" href="{% static 'css/lightbox.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}" >
    <link href="https://fonts.googleapis.com/css?family=Exo&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
        <div class="PropertyContainer">
                {% include 'partials/_navbar.html' %}
        <div class="Hero">
            <div class="Hero-head">
                    <h1 class="heading-1 mb-md">
                            {{ listing}}
                        </h1>
            
                        
            </div>
        </div>

        <div class="BreadCrum">
           <ul class="BreadCrum--list">
               <li class="BreadCrum--item">
                    <svg class="BreadCrum--icon">
                            <use xlink:href="{% static 'img/sprite.svg' %}#icon-home"></use>
                    </svg>
                    <a href="{% url 'home' %}" class="BreadCrum--link">Home</a>
               </li> 

               <li class="BreadCrum--item">
                    <a href="{% url 'listings' %}" class="BreadCrum--link">listing</a>
               </li>

               <li  class="BreadCrum--item">
                {{ listing }}
               </li>

           </ul>
        </div>
        {% include 'partials/_alert.html' %}

        <section class="Property__Main">
            <div class="Property__Main--container">
              <div class="Property__Main--row">
                <div class="Property__Main--col-left">
                  <img src="{{listing.photo_main.url}}" alt="home" class="Property__Main--col-left-img mb-md">

                  <div class="Property__Main--col-left__thumb">

                    <div class="Property__Main--col-left__thumb-row">

                            {% if listing.photo_1 %}
                            <a href="{{ listing.photo_1.url }}" data-lightbox="home-images">
                              <img src="{{ listing.photo_1.url }}" alt="" class="img-fluid">
                            </a>
    
                          {% endif %}
                          {% if listing.photo_2 %}
                            <a href="{{ listing.photo_2.url }}" data-lightbox="home-images">
                              <img src="{{ listing.photo_2.url }}" alt="" class="img-fluid">
                            </a>
                  
                          {% endif %}
                          {% if listing.photo_3 %}
                            <a href="{{ listing.photo_3.url }}" data-lightbox="home-images">
                              <img src="{{ listing.photo_3.url }}" alt="" class="img-fluid">
                            </a>
                  
                          {% endif %}
                          {% if listing.photo_4 %}
                            <a href="{{ listing.photo_4.url }}" data-lightbox="home-images">
                              <img src="{{ listing.photo_4.url }}" alt="" class="img-fluid">
                            </a>
                        
                          {% endif %}
                          {% if listing.photo_5 %}
                            <a href="{{ listing.photo_5.url }}" data-lightbox="home-images">
                              <img src="{{ listing.photo_5.url }}" alt="" class="img-fluid">
                            </a>
                        
                           {% endif %}
                          {% if listing.photo_6 %}
                            <a href="{{ listing.photo_6.url }}" data-lightbox="home-images">
                              <img src="{{ listing.photo_6.url }}" alt="" class="img-fluid">
                            </a>
    
                          {% endif %}
                    </div>

                  </div>


                  <section class="Property__detail">
                      <div class="Property__detail--wrap">
        
        
                    <div class="Property__detail--col">
                        <ul class="Property__detail--row">
                            <li class="Property__detail--item">
                                  <span>  <svg class="Property__detail--item-icon">
                                            <use xlink:href="{% static 'img/sprite.svg' %}#icon-moneybag"></use>
                                    </svg>  Asking Price: </span>
        
                                <span>
                                        ${{listing.price | intcomma}}
                                </span>
        
                            </li>
        
        
                            <li class="Property__detail--item">
                                    <span><svg class="Property__detail--item-icon">
                                            <use xlink:href="{% static 'img/sprite.svg' %}#icon-bed"></use>
                                    </svg>  Bedrooms:  </span>
                                <span>
                                        {{ listing.bedroom }}
                                </span>
                            </li>
        
        
                            <li class="Property__detail--item">
                                    <span><svg class="Property__detail--item-icon">
                                            <use xlink:href="{% static 'img/sprite.svg' %}#icon-bath"></use>
                                    </svg>  Bath Rooms: </span>
                                <span> {{ listing.bathroom }}  </span>
                            </li>
                            
                            <li class="Property__detail--item">
                                    <span ><svg class="Property__detail--item-icon">
                                            <use xlink:href="{% static 'img/sprite.svg' %}#icon-travel-car"></use>
                                    </svg> Garage: </span>
        
                                <span> {{ listing.garage }} </span>
                            </li>
                        </ul>
                    </div>
        
                    <div class="Property__detail--col">
                            <ul class="Property__detail--row">
                                <li class="Property__detail--item">
                                       <span> <svg class="Property__detail--item-icon">
                                                <use xlink:href="{% static 'img/sprite.svg' %}#icon-expand"></use>
                                        </svg>  Square Feet: </span>
                                    <span>
                                            {{ listing.sqft }}
                                    </span>
            
                                </li>
            
            
                                <li class="Property__detail--item">
                                      <span> <svg class="Property__detail--item-icon">
                                                <use xlink:href="{% static 'img/sprite.svg' %}#icon-controller-stop"></use>
                                        </svg>  Lot Size: </span> 
                                    <span>
                                            {{ listing.lot_size }}
                                    </span>
                                </li>
            
            
                                <li class="Property__detail--item">
                                       <span> <svg class="Property__detail--item-icon">
                                                <use xlink:href="{% static 'img/sprite.svg' %}#icon-calendar"></use>
                                        </svg> Listed: </span>
                                    <span> {{ listing.list_date | timesince }}  </span>
                                </li>
                                
                                <li class="Property__detail--item">
                                      <span>  <svg class="Property__detail--item-icon">
                                                <use xlink:href="{% static 'img/sprite.svg' %}#icon-profile-male"></use>
                                        </svg> Realtor: </span>
        
                                    <span> Jane Doe </span>
                                </li>
                            </ul>
                        </div>
        
                    </div>
        
                    
        
                  </section>
        



                    
                </div>
                <div class="Property__Main--col-right">

                    <div class="Property__Main--card">
                        <img class="Property__Main--col-right-img mb-sm" src="{{listing.realtor.photo.url}}" alt="Seller of the month">
                        <div class="Property__Main--card-body">
                          <h4 class="heading-4 mb-sm">
                              Property Realtor</h4>
                          <h3 class="Property__Main--card-body-name mb-sm">{{ listing.realtor.name }}</h3>

                        </div>
                        <a class= "btn-pri" data-toggle="modal" data-target="#inquiryModal">Make an Inquiry</a>
                      </div>
                      

                </div>
              </div>
            </div>
            <div class="clearfix">

            </div>
          </section>

          
           <!-- Inquiry Modal -->
  <div class="modal fade" id="inquiryModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="inquiryModalLabel">Make An Inquiry</h5>
          <button type="button" class="close" data-dismiss="modal">
            <span>&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form action="{% url 'contact' %}" method="POST">
            {% csrf_token %}
            {% if user.is_authenticated %}
              <input type="hidden" name="user_id" value="{{ user_id }}" />

            {% else %}

              <input type="hidden" name="user_id" value="0" />

            {% endif %}

            <input type="hidden" name="realtor_email" value="{{ listing.realtor.email }}" />
            <input type="hidden" name="listing_id" value="{{ listing.id }}" />



            <div class="form-group">
              <label for="property_name" class="para">Property:</label>
              <input type="text" name="listing" class="modal-input" value="{{ listing.title }}" >
            </div>
            <div class="form-group">
              <label for="name" class="para">Name:</label>
              <input type="text" name="name" 
                  {% if user.is_authenticated %}
                      value="{{ user.first_name }} {{ user.last_name }}"
                  {% endif %}
              
              class="modal-input" required>
            </div>
            <div class="form-group">
              <label for="email" class="para">Email:</label>
              <input type="email" name="email" class="modal-input" 
              {% if user.is_authenticated %}
                    value="{{ user.email }}"
              {% endif %}
              
              required>
            </div>
            <div class="form-group">
              <label for="phone" class="para">Phone:</label>
              <input type="text" name="phone" class="modal-input">
            </div>
            <div class="form-group">
              <label for="message" class="para">Message:</label>
              <textarea name="message" class="modal-input"></textarea>
            </div>
            <hr>
            <input type="submit" value="Send" class="btn-pri">
          </form>
        </div>
      </div>
    </div>


  </div>

  </div>

      
{% include 'partials/_footer.html' %}

  {% endblock %}

  {% block scripts %}

  <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'js/lightbox.min.js' %}"></script>
  <script src="{% static 'js/main.js' %}"></script>


  {% endblock %}


